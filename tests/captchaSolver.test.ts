// src/services/CaptchaSolver.test.ts
import { solveCaptcha } from '../src/services/CaptchaSolver';
import { CaptchaSolverOptions } from '../src/types/CaptchaSolverOptions';

describe('solveCaptcha', () => {
    it('should solve the captcha correctly', async () => {
        const base64Image = "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";

        const options: CaptchaSolverOptions = {
            language: 'eng', // Specify the language if needed
            expectedLength: 5, // Example expected length
            validationRegex: /^[A-Za-z0-9]+$/ // Example regex for validation
        };

        const result = await solveCaptcha(base64Image, options);
        
        // Add your expected result here
        expect(result).toMatch(options.validationRegex ?? '');
        expect(result.length).toBe(options.expectedLength);
        expect(result).toBe('2yyfg');
    });
});

